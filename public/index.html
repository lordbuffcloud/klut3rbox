<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>klut3rbox</title>
    <meta name="theme-color" content="#0f172a" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header>
      <h1>klut3rbox</h1>
      <div class="status">
        <span id="statusText">Connecting...</span>
      </div>
    </header>

    <main>
      <section class="boxes" id="boxes">
        <h2>Boxes</h2>
        <form id="addBoxForm" class="inline-form">
          <input type="text" id="newBoxCode" placeholder="New box code (e.g., box2)" required />
          <input type="text" id="newBoxLabel" placeholder="Label (optional)" />
          <button type="submit">Add Box</button>
        </form>
        <div id="boxGrid" class="box-grid"></div>
      </section>

      <section class="quick-add" id="quick-add">
        <h2>Quick Add (Choose File)</h2>
        <div class="inline-form">
          <input type="file" id="quickFile" accept="image/*" capture="environment" />
          <select id="quickBoxSelect"></select>
          <button id="quickAddBtn">Quick Add</button>
        </div>
        <p class="note">If an AI key is configured, the server will infer name/description from the image and save to the selected box.</p>
        <div id="suggestPanel" class="suggest-panel" style="display:none">
          <div class="suggest-body">
            <img id="suggestImage" alt="preview" />
            <input type="text" id="suggestName" placeholder="Name" />
            <input type="text" id="suggestDesc" placeholder="Description" />
            <select id="suggestBoxSelect"></select>
          </div>
          <div class="inline-form">
            <button id="suggestConfirm">Add Item</button>
            <button id="suggestCancel" type="button">Cancel</button>
          </div>
        </div>
      </section>

      <section class="add-item" id="add-item">
        <h2>Add Item Manually</h2>
        <form id="addItemForm" class="grid-form">
          <input type="text" id="itemName" placeholder="Item name" required />
          <input type="text" id="itemDesc" placeholder="Description (optional)" />
          <select id="manualBoxSelect"></select>
          <button type="submit">Add</button>
        </form>
      </section>

      <section class="search" id="search">
        <h2>Search</h2>
        <div class="grid-form">
          <input type="search" id="searchInput" placeholder="Search by name or description" />
          <select id="searchBoxSelect"></select>
          <button id="searchBtn">Search</button>
          <button id="exportBtn" type="button">Export JSON</button>
        </div>
      </section>

      <section class="results" id="results">
        <h2>Items</h2>
        <div id="items"></div>
      </section>
    </main>

    <nav class="bottom-nav" id="bottomNav">
      <button data-target="#boxes">Boxes</button>
      <button data-target="#quick-add">Quick Add</button>
      <button data-target="#search">Search</button>
      <button data-target="#results">Items</button>
    </nav>

    <button class="fab" id="fabAdd" title="Quick Add">ï¼‹</button>

    <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <div class="modal-backdrop" id="editModal" style="display:none">
      <div class="modal">
        <h3>Edit Item</h3>
        <form id="editForm">
          <input type="hidden" id="editId" />
          <div class="form-row">
            <label for="editName">Name</label>
            <input type="text" id="editName" required />
          </div>
          <div class="form-row">
            <label for="editDesc">Description</label>
            <input type="text" id="editDesc" />
          </div>
          <div class="form-row">
            <label for="editBox">Box Code</label>
            <input type="text" id="editBox" placeholder="e.g., box1" />
          </div>
          <div class="modal-actions">
            <button type="submit">Save</button>
            <button type="button" class="secondary" id="editCancel">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <script src="/main.js"></script>
  </body>
  </html>


